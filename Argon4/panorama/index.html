<html>
    <head>
        <title>Assignment 1 - Panorama</title>
        <meta name="description" content="Assignment 1 - Panorama">
        <script src="../resources/js/aframe.js"></script>
        <script src="../resources/js/argon.min.js"></script>
        <script src="../build.js"></script>
        <script src="../resources/js/CSS3DArgonRenderer.js"></script>
        <script src="../resources/js/CSS3DArgonHUD.js"></script>
        <script src="../resources/js/aframe-look-at-component.js"></script>
	   <link rel="stylesheet" type="text/css" href="../resources/style.css">
    </head>
    <body>

        <div hidden>
            <div id="boxface" class="boxface">Dead Sea<br>at<br>Ein Bokek</div>
            <!--<div id="mydiv2" class="boxface">WebGL<br>+<br>CSS</div>-->
        </div>

        <!--
        <div id="menu" class="menu"></div>
        -->

        <ar-scene desiredreality="src:url(../resources/reality/panorama/index.html);" panorama__sea="src:url(panoramas/sea1.jpg);lla:-84.3951 33.7634 206;initial:true;">
            <a-entity id="pan" position="-10 -1 -10">
                <!--<a-entity billboard position="0 3 0">
                    <a-entity rotation="0 0 0">-->
                <a-entity css-object="div: #boxface" scale="0.01 0.01 0.01" rotation="0 0 0" position="1 2 0.175"></a-entity>
                        <!--<a-entity css-object="div: #mydiv2" scale="0.01 0.01 0.01" rotation="0 -90 0" position="-0.5 0 0"></a-entity>-->
                    <!--</a-entity>
                </a-entity>-->
                <a-cylinder position="0.15 1.5 0.15" radius="0.1" height="3" color="#FFC65D"></a-cylinder>
                <a-plane rotation="-90 0 0" width="4" height="4" color="#654321"></a-plane>
            </a-entity>
        </ar-scene>

    <script>
        var arScene = document.querySelector('ar-scene');
        var content = document.querySelector('#pan');

        // the ar-camera has an argon reference frame attached, so when it gets it's first value,
        // we'll get this event
        arScene.addEventListener("referenceframe-statuschanged", function () {
            var camera = document.querySelector('ar-camera');
            var vec = camera.object3D.getWorldDirection();
            vec.multiplyScalar(-10);
            vec.y -= 1;
            content.setAttribute("position", {x: vec.x, y: vec.y, z: vec.z});
        });

        var panoramas = [
            { text: 'Dead Sea', name: 'sea' }
        ];

        // var currentPanorama;
        // // get the menu element
        // var menu = document.getElementById('menu');
        // // add buttons to the menu for each panorama
        // panoramas.forEach(function (p) {
        //     var button = document.createElement('button');
        //     button.textContent = p.text;
        //     menu.appendChild(button);
        //     // when a button is tapped, have the reality fade in the corresponding panorama
        //     button.addEventListener('click', function () {
        //         arScene.sceneEl.emit('showpanorama', { name: p.name });
        //     });
        // });

        // arScene.addEventListener('argon-initialized', function(evt) {
        //     arScene.sceneEl.hud.appendChild(menu);
        //     arScene.sceneEl.argonApp.focusEvent.addEventListener(function () {
        //         document.getElementById('menu').style.display = 'block';
        //     });
        //     arScene.sceneEl.argonApp.blurEvent.addEventListener(function () {
        //         document.getElementById('menu').style.display = 'none';
        //     });
        // });
        </script>

    </body>
</html>